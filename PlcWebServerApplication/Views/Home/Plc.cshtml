@model List<PLCComunicationLib.Simatic>
@{
    ViewData["Title"] = "Plc";
    string[] outputs = new string[] { "DB1.DBX0.0",
                                          "DB1.DBX0.1",
                                          "DB1.DBX0.2",
                                          "DB1.DBX0.3",
                                          "DB1.DBX0.4",
                                          "DB1.DBX0.5",
                                          "DB1.DBX0.6",
                                          "DB1.DBX0.7"};
    List<Tuple<string, string>> element_name = new List<Tuple<string, string>>();
    int row;
    const int valueCell = 4;
}
<p1>Vypis vsech plc</p1>

<table id="myTable" class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>plc ID</th>
            <th>Ip Address</th>
            <th>Output pin</th>
            <th>Value</th>
            <th>Change Value</th>
            <th>Change Value 2</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var plc in Model)
        {
            
           // var result = plc.Read_bite(outputs).Values.ToList();
            for (int i = 0;i < outputs.Length;i++)
            {
                <tr>
                    <th>@plc.ID</th>
                    <th>@plc.IP </th>
                    <th>Output @i</th>
                    <th>Cekam</th>
                    <th><a class="btn" >ON/OFF</a></th>
                    <th><input id="@string.Format("{0}_{1}",plc.ID,i)" type="checkbox" /></th>
                </tr>
                element_name.Add(new Tuple<string, string>(plc.ID.ToString(), i.ToString()));
            }
        }
    </tbody>
</table>
<script type="text/javascript">
    var urlWrite = "@Url.Action("Write2PLC", "Home")";
    var urlRead = "@Url.Action("ReadFromPlc", "Home")";
    var myTable = document.getElementById("myTable");
    @foreach(var item in element_name){
        <Text>
            $("#@string.Format("{0}_{1}",item.Item1,item.Item2)").change(function () {
                if (this.checked) {
                    $.post(urlWrite, 'id=@item.Item1&pin=@item.Item2&value=True ', function (result) { });
                }
                else {
                    $.post(urlWrite, 'id=@item.Item1&pin=@item.Item2&value=False', function (result) { });
                }
             })
        </Text>
    }                     
   setInterval(function () {
      //  alert("kravina");  
               // if (status != true) {
        //  status = true;
        $.get(urlRead + "?id=0&pin=0",
                   function (data) {
                       alert("Data: " + data);
                      
                     }
                    )
                  //  status = false;
                    
               
               
            },3000)
  

</script>

